<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html ng-app="jogoDaSequencia">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="shortcut icon" href="./resources/images/favicon.ico">
<link rel="icon" type="image/gif" href="./resources/images/animated_favicon1.gif">
<title>Jogo da Sequência AngularJs</title>

<link rel="stylesheet" type="text/css" href="./resources/css/navbar.css" />
<link rel="stylesheet" type="text/css" href="./resources/css/style.css" />

<!-- <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script> -->
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular.min.js"></script>
</head>
<body ng-controller="Jogo">
<nav>
  <ul>
    <li><a href="#">Jogo Da Sequência</a></li>
     <li><a href="index.html">Index</a></li>
  </ul>
</nav>
	<fieldset>
		<form name="formulario1" id="form1" ng-show="formulario1">
		
			<h5> Informe o intervalo dos números.</h5>
			<input type="number" ng-model="intervalo" name="intervalo" id="intervalo" class="input" placeholder="1 Até ...." required><br/><br/>
			
			<h5> Informe o tamanho da sequência.</h5>
			<input type="number" ng-model="tamanho" name="jogada1" id="jogada" class="input" placeholder="Tamanho..." required><br/><br/>
			
			<button class="confirm" ng-click="geraSequencia()">Iniciar Jogo</button>		
		</form>

		<form name="formulario2" id="form2" ng-hide="formulario2">
			<p id="header" align="center">Informe a jogada</p>
			<button class="confirm" ng-click="verificaJogada()">Testa Valor</button>	
			<br/>
		</form>
		
		<p id="dica" align="center"></p>
		<p id="jogado" align="center"></p>
				
	</fieldset>
	
		<div id="botoes" class="teclado"></div>
	
	
	
	<script type="text/javascript">	
	var jogada;
	var sequencia = angular.module('jogoDaSequencia', []);
	
		sequencia.controller('Jogo', ['$scope', '$http' , '$log', function ($scope, $http, $log) {
			$scope.formulario2 = true;
	    
	   /* --------------------------------------------------------------------------------------------------------- */
		function limpaSessao($scope, $http) {
		    angular.element(document).ready(function () {
		    	 $http ({
				     method: 'GET',
				     url: 'http://localhost:8080/servicos/jogo/sequencia/limpar/'
				    })
				    .success (function (data, status, headers, config) {
				        $log.info(data);
				    })
				    .error (function (data, status, headers, config) {
				    	$log.error(status);
				    });
		    });
		}
	   
	    /* --------------------------------------------------------------------------------------------------------- */
		$scope.geraSequencia = function (){
			var intervalo = $scope.intervalo;
			var tamanho = $scope.tamanho;
			
			$http ({
			     method: 'GET',
			     url: 'http://localhost:8080/servicos/jogo/sequencia/jogar/' + intervalo + '/' + tamanho 
			    })
			    .success (function (data, status, headers, config) {
			        $log.info(data);
			        $scope.formulario1 = false;
			        $scope.formulario2 = false;
			        
			        criarBotoes($scope, $log, intervalo);
			    })
			    .error (function (data, status, headers, config) {
			    	$log.error(status);
			    });
		}
	    
		/* --------------------------------------------------------------------------------------------------------- */
		function criarBotoes($scope, $log, intervalo){
			var inter = +intervalo;
			for(i = 1 ; i <= intervalo ; i++){
				var btn1 = '<button class="number" onclick="valor('+i+')">' +i+'</button>';
				var btn2 = '<input type="button" class="number" value="'+i+'" id="btn' +i+ '"' + ' onclick="valor(this.value)" />';
				var btn3 = '<button class="number" ng-click="verificaJogada()">' +i+'</button>';
				var btn4 = '<input type="button" class="number" value="'+i+'" id="btn' +i+ '" />';
				angular.element(document.getElementById('botoes')).append(btn4);

				//$log.info(btn2);
			}
		}
	
		/* --------------------------------------------------------------------------------------------------------- */
			 $scope.verificaJogada = function(){
				 $http ({
				     method: 'GET',
				     url: 'http://localhost:8080/servicos/jogo/sequencia/jogar/' + 9 
				    })
				    .success (function (data, status, headers, config) {
				        $log.info(data);
				    })
				    .error (function (data, status, headers, config) {
				    	$log.error(status);
				    });
		}
		
 /* --------------------------------------------------------------------------------------------------------- */
}]);
//fim do modulo
	
		function valor(value){
			jogada = +value;
			alert(document.getElementsByClassName('number'));
			alert("O valor do botão é: " + jogada);
		} 
			
	</script>
	
</body>

</html>
















